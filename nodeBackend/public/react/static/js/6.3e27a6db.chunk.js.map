{"version":3,"sources":["components/Login/Login.module.scss","components/Login/Login.jsx"],"names":["module","exports","crypto","SimpleCrypto","Login","props","username","useFormInput","password","useState","error","update_error","handleClick","e","a","preventDefault","u","value","p","fetch","headers","Accept","method","body","JSON","stringify","encrypt","res","json","result","login","token","data","console","log","className","onSubmit","type","classNames","styles","Input","name","placeholder","autoFocus","required","Error","style","display","onClick","disabled","length","id","v","change","onChange","target"],"mappings":"gFACAA,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,uB,6KCIjDC,EAAS,I,OAAIC,GADA,iCAIJ,SAASC,EAAMC,GAC5B,IAAIC,EAAWC,EAAa,IACxBC,EAAWD,EAAa,IAFO,EAGPE,oBAAS,GAHF,mBAG9BC,EAH8B,KAGvBC,EAHuB,KAM/BC,EAAW,uCAAG,WAAMC,GAAN,mBAAAC,EAAA,yDAChBD,EAAEE,iBAEEC,EAAIV,EAASW,MACbC,EAAIV,EAASS,MACXD,GAAKE,EALK,uBAMdP,GAAa,GANC,0CAWdA,GAAa,GAXC,UAYEQ,MAAgB,SAAU,CACxCC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBnB,SAAUU,EACVR,SAAUN,EAAOwB,QAAQR,OApBf,eAYVS,EAZU,iBAuBFA,EAAIC,OAvBF,SAuBdD,EAvBc,QAwBNE,QACNlB,GAAa,GACbN,EAAMyB,MAAMH,EAAII,MAAOJ,EAAIK,OAE3BrB,GAAa,GA5BD,kDA+BdA,GAAa,GACbsB,QAAQC,IAAR,MAhCc,0DAAH,sDAoCf,OACE,yBAAKC,UAAU,qCACb,0BAAMC,SAAUxB,GACd,yBAAKuB,UAAU,OACb,yCACEE,KAAK,OACLF,UAAWG,IAAWC,IAAOC,MAAO,OACpCC,KAAK,QACDnC,EAJN,CAKEoC,YAAY,WACZC,WAAS,EACTC,UAAQ,MAGZ,yBAAKT,UAAU,OACb,yCACEE,KAAK,WACLF,UAAWG,IAAWC,IAAOC,MAAO,OACpCC,KAAK,QACDjC,EAJN,CAKEkC,YAAY,WACZE,UAAQ,MAGZ,yBAAKT,UAAWI,IAAOM,MAAOC,MAAOpC,EA7D/B,GADM,CAAEqC,QAAS,SA+DrB,yBAAKZ,UAAU,IAAf,kCAGF,yBAAKA,UAAU,IACb,4BACEa,QAASpC,EACTyB,KAAK,SACLY,SAAU3C,EAAS4C,OAAS,GAAK1C,EAAS0C,OAAS,EACnDf,UAAWG,IAAW,yCACtBa,GAAG,gBALL,YAcV,SAAS5C,EAAa6C,GAAI,IAAD,EACD3C,mBAAS2C,GADR,mBAClBnC,EADkB,KACXoC,EADW,KAGvB,MAAO,CAAEpC,QAAOqC,SADD,SAAAzC,GAAC,OAAIwC,EAAOxC,EAAE0C,OAAOtC","file":"static/js/6.3e27a6db.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Error\":\"Login_Error__2NWwE\",\"Input\":\"Login_Input__2QRLW\"};","import React, { useState } from \"react\";\r\nimport styles from \"./Login.module.scss\";\r\nimport classNames from \"classnames\";\r\nimport SimpleCrypto from \"simple-crypto-js\";\r\nconst _secretKey = \"asdasdjaksjdkajskl;asdjalksdj\";\r\nconst crypto = new SimpleCrypto(_secretKey);\r\n\r\nconst baseUrl = \"\"; //\"http://localhost:4000\";\r\nexport default function Login(props) {\r\n  let username = useFormInput(\"\");\r\n  let password = useFormInput(\"\");\r\n  let [error, update_error] = useState(false);\r\n  let displayNone = { display: \"none\" };\r\n  let empty = {};\r\n  let handleClick = async e => {\r\n    e.preventDefault();\r\n\r\n    let u = username.value;\r\n    let p = password.value;\r\n    if (!(u && p)) {\r\n      update_error(true);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      update_error(false);\r\n      let res = await fetch(baseUrl + \"/login\", {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          username: u,\r\n          password: crypto.encrypt(p)\r\n        })\r\n      });\r\n      res = await res.json();\r\n      if (res.result) {\r\n        update_error(false);\r\n        props.login(res.token, res.data);\r\n      } else {\r\n        update_error(true);\r\n      }\r\n    } catch (err) {\r\n      update_error(true);\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-12 col-lg-8 col-md-10 mx-auto\">\r\n      <form onSubmit={handleClick}>\r\n        <div className=\"m-2\">\r\n          <input\r\n            type=\"text\"\r\n            className={classNames(styles.Input, \"m-3\")}\r\n            name=\"name\"\r\n            {...username}\r\n            placeholder=\"username\"\r\n            autoFocus\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"m-2\">\r\n          <input\r\n            type=\"password\"\r\n            className={classNames(styles.Input, \"m-3\")}\r\n            name=\"name\"\r\n            {...password}\r\n            placeholder=\"password\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.Error} style={error ? empty : displayNone}>\r\n          <div className=\"\">Please enter correct details.</div>\r\n        </div>\r\n\r\n        <div className=\"\">\r\n          <button\r\n            onClick={handleClick}\r\n            type=\"submit\"\r\n            disabled={username.length < 3 || password.length < 3}\r\n            className={classNames(\"btn btn-outline-primary m-3 px-5 py-2\")}\r\n            id=\"submit_ph_no\"\r\n          >\r\n            Login\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nfunction useFormInput(v) {\r\n  let [value, change] = useState(v);\r\n  let onChange = e => change(e.target.value);\r\n  return { value, onChange };\r\n}\r\n"],"sourceRoot":""}